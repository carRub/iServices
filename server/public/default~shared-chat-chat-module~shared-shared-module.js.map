{"version":3,"sources":["./src/app/shared/chat/chat-routing.module.ts","./src/app/shared/chat/chat.component.ts","./src/app/shared/chat/chat.component.html","./src/app/shared/chat/chat.module.ts","./src/app/shared/chat/chat.service.ts"],"names":[],"mappings":"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","file":"default~shared-chat-chat-module~shared-shared-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ChatComponent } from './chat.component';\n\nconst routes: Routes = [{ path: '', component: ChatComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ChatRoutingModule { }\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ChatService } from './chat.service';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-chat',\n  templateUrl: './chat.component.html',\n  styleUrls: ['./chat.component.scss']\n})\nexport class ChatComponent implements OnInit, OnDestroy {\n\n  messagesHistory: {sender: number, message: string} [] = [];\n  messagesSubscription: Subscription;\n  chatSubscription: Subscription;\n  msg = '';\n  myId = 1;\n  senderId = 1;\n\n  constructor(private chatService: ChatService) {\n    this.messagesHistory = [\n      {sender: 2, message: 'Hola'},\n      {sender: 1, message: 'Qué tal'},\n      {sender: 2, message: 'Quisiera más informes, por favor'},\n      {sender: 1, message: 'Claro, el precio por hora es de $100'},\n      {sender: 2, message: 'Gracias'},\n      {sender: 1, message: 'Por nada'},\n    ];\n   }\n  ngOnDestroy(): void {\n    \n    this.messagesSubscription.unsubscribe();\n  }\n\n  ngOnInit(): void {\n    // get messages from the backend and store them in messagesHistory;\n\n    this.chatService.startChat('connecting');\n\n    // this.chatSubscription = this.chatService.connectedToChat()\n    // .subscribe((msg: string) => {\n    //   console.log(msg);\n    //   if (this.myId === 1) {\n    //     this.myId = 2;\n    //   } else {\n    //     this.myId = 1;\n    //   }\n    // });\n\n    // this.myId ++;\n    // console.log(this.myId);\n\n    this.messagesSubscription = this.chatService.getMessages()\n    .subscribe((msg: {message: string, sender: number}) => {\n      // save messages somewhere\n      console.log(\"message \", msg);\n      // const message = {message: msg, sender};\n      this.messagesHistory.push(msg);\n      console.log(msg);\n    });\n  }\n\n  sendMessage() {\n    this.chatService.sendMessage(this.msg, this.senderId);\n    if (this.senderId === 1) {\n          this.senderId = 2;\n        } else {\n          this.senderId = 1;\n        }\n  }\n\n}\n","<div class=\"container\">\n    <h3 class=\" text-center\">Messaging</h3>\n    <div class=\"messaging\">\n        <div class=\"inbox_msg\">\n            <!-- <div class=\"inbox_people\">\n                <div class=\"headind_srch\">\n                    <div class=\"recent_heading\">\n                        <h4>Recent</h4>\n                    </div>\n                    <div class=\"srch_bar\">\n                        <div class=\"stylish-input-group\">\n                            <input type=\"text\" class=\"search-bar\" placeholder=\"Search\">\n                            <span class=\"input-group-addon\">\n                                <button type=\"button\"> <i class=\"fa fa-search\" aria-hidden=\"true\"></i> </button>\n                            </span> </div>\n                    </div>\n                </div>\n                <div class=\"inbox_chat\">\n                    <div class=\"chat_list active_chat\">\n                        <div class=\"chat_people\">\n                            <div class=\"chat_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\n                                    alt=\"sunil\"> </div>\n                            <div class=\"chat_ib\">\n                                <h5>Sunil Rajput <span class=\"chat_date\">Dec 25</span></h5>\n                                <p>Test, which is a new approach to have all solutions\n                                    astrology under one roof.</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"chat_list\">\n                        <div class=\"chat_people\">\n                            <div class=\"chat_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\n                                    alt=\"sunil\"> </div>\n                            <div class=\"chat_ib\">\n                                <h5>Sunil Rajput <span class=\"chat_date\">Dec 25</span></h5>\n                                <p>Test, which is a new approach to have all solutions\n                                    astrology under one roof.</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"chat_list\">\n                        <div class=\"chat_people\">\n                            <div class=\"chat_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\n                                    alt=\"sunil\"> </div>\n                            <div class=\"chat_ib\">\n                                <h5>Sunil Rajput <span class=\"chat_date\">Dec 25</span></h5>\n                                <p>Test, which is a new approach to have all solutions\n                                    astrology under one roof.</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"chat_list\">\n                        <div class=\"chat_people\">\n                            <div class=\"chat_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\n                                    alt=\"sunil\"> </div>\n                            <div class=\"chat_ib\">\n                                <h5>Sunil Rajput <span class=\"chat_date\">Dec 25</span></h5>\n                                <p>Test, which is a new approach to have all solutions\n                                    astrology under one roof.</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"chat_list\">\n                        <div class=\"chat_people\">\n                            <div class=\"chat_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\n                                    alt=\"sunil\"> </div>\n                            <div class=\"chat_ib\">\n                                <h5>Sunil Rajput <span class=\"chat_date\">Dec 25</span></h5>\n                                <p>Test, which is a new approach to have all solutions\n                                    astrology under one roof.</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"chat_list\">\n                        <div class=\"chat_people\">\n                            <div class=\"chat_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\n                                    alt=\"sunil\"> </div>\n                            <div class=\"chat_ib\">\n                                <h5>Sunil Rajput <span class=\"chat_date\">Dec 25</span></h5>\n                                <p>Test, which is a new approach to have all solutions\n                                    astrology under one roof.</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"chat_list\">\n                        <div class=\"chat_people\">\n                            <div class=\"chat_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\n                                    alt=\"sunil\"> </div>\n                            <div class=\"chat_ib\">\n                                <h5>Sunil Rajput <span class=\"chat_date\">Dec 25</span></h5>\n                                <p>Test, which is a new approach to have all solutions\n                                    astrology under one roof.</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div> -->\n            <div class=\"mesgs\">\n                <div class=\"msg_history\">\n                    <div *ngFor=\"let message of messagesHistory\">\n                        <div *ngIf=\"message.sender != myId\" class=\"incoming_msg\">\n                            <div class=\"incoming_msg_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\n                                    alt=\"receiver\"> </div>\n                            <div class=\"received_msg\">\n                                <div class=\"received_withd_msg\">\n                                    <p>{{message.message}}</p>\n                                </div>\n                            </div>\n                        </div>\n                        <div *ngIf=\"message.sender == myId\" class=\"outgoing_msg\">\n                            <div class=\"sent_msg\">\n                                <p>{{message.message}}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"type_msg\">\n                    <div class=\"input_msg_write\">\n                        <input type=\"text\" [(ngModel)]=\"msg\" class=\"write_msg\" placeholder=\"Type a message\" />\n                        <button class=\"msg_send_btn\" (click)=\"sendMessage()\" type=\"button\"><i class=\"fa fa-paper-plane\"\n                                aria-hidden=\"true\"></i></button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</div>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ChatRoutingModule } from './chat-routing.module';\nimport { ChatComponent } from './chat.component';\nimport { FormsModule } from '@angular/forms';\n\n\n@NgModule({\n  declarations: [ChatComponent],\n  imports: [\n    CommonModule,\n    ChatRoutingModule,\n    FormsModule\n  ]\n})\nexport class ChatModule { }\n","import { Injectable } from '@angular/core';\nimport { Socket } from 'ngx-socket-io';\nimport { Observable } from 'rxjs';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ChatService {\n\n  messagesHistory: {sender: number; receiver: number,  message: string} [] = [];\n\n  constructor(private socket: Socket) {\n    this.messagesHistory = [\n      {sender: 2, receiver: 1, message: 'Hola'},\n      {sender: 1, receiver: 2, message: 'Qué tal'},\n      {sender: 2, receiver: 1, message: 'Quisiera más informes, por favor'},\n      {sender: 1, receiver: 2, message: 'Claro, el precio por hora es de $100'},\n      {sender: 2, receiver: 1, message: 'Gracias'},\n      {sender: 1, receiver: 2, message: 'Por nada'},\n    ];\n   }\n\n   // connecting to the chat\n   public startChat(message) {\n        this.socket.emit('startChat', message);\n  }\n\n  // confirmation\n  public connectedToChat() {\n    return Observable.create((observer) => {\n      this.socket.on('startChat', (message) => {\n        observer.next(message);\n      });\n    });\n  }\n\n  // senging a message\n  public sendMessage(message, sender) {\n    this.socket.emit('send', message, sender);\n  }\n\n  // getting a message\n  public getMessages() {\n    return Observable.create((observer) => {\n      this.socket.on('refresh', (message) => {\n        observer.next(message);\n      });\n    });\n  }\n\n  // refreshMessages() {\n  //   this.messagesHistory.push\n  // }\n\n}\n"],"sourceRoot":"webpack:///"}
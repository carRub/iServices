{"version":3,"sources":["./src/app/shared/chat/chat-routing.module.ts","./src/app/shared/chat/chat.component.ts","./src/app/shared/chat/chat.component.html","./src/app/shared/chat/chat.module.ts","./src/app/shared/chat/chat.service.ts"],"names":[],"mappings":"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","file":"default~shared-chat-chat-module~shared-shared-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ChatComponent } from './chat.component';\r\n\r\nconst routes: Routes = [{ path: '', component: ChatComponent }];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ChatRoutingModule { }\r\n","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { ChatService } from './chat.service';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-chat',\r\n  templateUrl: './chat.component.html',\r\n  styleUrls: ['./chat.component.scss']\r\n})\r\nexport class ChatComponent implements OnInit, OnDestroy {\r\n\r\n  messagesHistory: {sender: number, message: string} [] = [];\r\n  messagesSubscription: Subscription;\r\n  chatSubscription: Subscription;\r\n  msg = '';\r\n  myId = 1;\r\n  senderId = 1;\r\n\r\n  constructor(private chatService: ChatService) {\r\n    this.messagesHistory = [\r\n      {sender: 2, message: 'Hola'},\r\n      {sender: 1, message: 'Qué tal'},\r\n      {sender: 2, message: 'Quisiera más informes, por favor'},\r\n      {sender: 1, message: 'Claro, el precio por hora es de $100'},\r\n      {sender: 2, message: 'Gracias'},\r\n      {sender: 1, message: 'Por nada'},\r\n    ];\r\n   }\r\n  ngOnDestroy(): void {\r\n    \r\n    this.messagesSubscription.unsubscribe();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // get messages from the backend and store them in messagesHistory;\r\n\r\n    this.chatService.startChat('connecting');\r\n\r\n    // this.chatSubscription = this.chatService.connectedToChat()\r\n    // .subscribe((msg: string) => {\r\n    //   console.log(msg);\r\n    //   if (this.myId === 1) {\r\n    //     this.myId = 2;\r\n    //   } else {\r\n    //     this.myId = 1;\r\n    //   }\r\n    // });\r\n\r\n    // this.myId ++;\r\n    // console.log(this.myId);\r\n\r\n    this.messagesSubscription = this.chatService.getMessages()\r\n    .subscribe((msg: {message: string, sender: number}) => {\r\n      // save messages somewhere\r\n      console.log(\"message \", msg);\r\n      // const message = {message: msg, sender};\r\n      this.messagesHistory.push(msg);\r\n      console.log(msg);\r\n    });\r\n  }\r\n\r\n  sendMessage() {\r\n    this.chatService.sendMessage(this.msg, this.senderId);\r\n    if (this.senderId === 1) {\r\n          this.senderId = 2;\r\n        } else {\r\n          this.senderId = 1;\r\n        }\r\n  }\r\n\r\n}\r\n","<div class=\"container\">\r\n    <h3 class=\" text-center\">Messaging</h3>\r\n    <div class=\"messaging\">\r\n        <div class=\"inbox_msg\">\r\n            <!-- <div class=\"inbox_people\">\r\n                <div class=\"headind_srch\">\r\n                    <div class=\"recent_heading\">\r\n                        <h4>Recent</h4>\r\n                    </div>\r\n                    <div class=\"srch_bar\">\r\n                        <div class=\"stylish-input-group\">\r\n                            <input type=\"text\" class=\"search-bar\" placeholder=\"Search\">\r\n                            <span class=\"input-group-addon\">\r\n                                <button type=\"button\"> <i class=\"fa fa-search\" aria-hidden=\"true\"></i> </button>\r\n                            </span> </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"inbox_chat\">\r\n                    <div class=\"chat_list active_chat\">\r\n                        <div class=\"chat_people\">\r\n                            <div class=\"chat_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\r\n                                    alt=\"sunil\"> </div>\r\n                            <div class=\"chat_ib\">\r\n                                <h5>Sunil Rajput <span class=\"chat_date\">Dec 25</span></h5>\r\n                                <p>Test, which is a new approach to have all solutions\r\n                                    astrology under one roof.</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"chat_list\">\r\n                        <div class=\"chat_people\">\r\n                            <div class=\"chat_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\r\n                                    alt=\"sunil\"> </div>\r\n                            <div class=\"chat_ib\">\r\n                                <h5>Sunil Rajput <span class=\"chat_date\">Dec 25</span></h5>\r\n                                <p>Test, which is a new approach to have all solutions\r\n                                    astrology under one roof.</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"chat_list\">\r\n                        <div class=\"chat_people\">\r\n                            <div class=\"chat_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\r\n                                    alt=\"sunil\"> </div>\r\n                            <div class=\"chat_ib\">\r\n                                <h5>Sunil Rajput <span class=\"chat_date\">Dec 25</span></h5>\r\n                                <p>Test, which is a new approach to have all solutions\r\n                                    astrology under one roof.</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"chat_list\">\r\n                        <div class=\"chat_people\">\r\n                            <div class=\"chat_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\r\n                                    alt=\"sunil\"> </div>\r\n                            <div class=\"chat_ib\">\r\n                                <h5>Sunil Rajput <span class=\"chat_date\">Dec 25</span></h5>\r\n                                <p>Test, which is a new approach to have all solutions\r\n                                    astrology under one roof.</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"chat_list\">\r\n                        <div class=\"chat_people\">\r\n                            <div class=\"chat_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\r\n                                    alt=\"sunil\"> </div>\r\n                            <div class=\"chat_ib\">\r\n                                <h5>Sunil Rajput <span class=\"chat_date\">Dec 25</span></h5>\r\n                                <p>Test, which is a new approach to have all solutions\r\n                                    astrology under one roof.</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"chat_list\">\r\n                        <div class=\"chat_people\">\r\n                            <div class=\"chat_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\r\n                                    alt=\"sunil\"> </div>\r\n                            <div class=\"chat_ib\">\r\n                                <h5>Sunil Rajput <span class=\"chat_date\">Dec 25</span></h5>\r\n                                <p>Test, which is a new approach to have all solutions\r\n                                    astrology under one roof.</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"chat_list\">\r\n                        <div class=\"chat_people\">\r\n                            <div class=\"chat_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\r\n                                    alt=\"sunil\"> </div>\r\n                            <div class=\"chat_ib\">\r\n                                <h5>Sunil Rajput <span class=\"chat_date\">Dec 25</span></h5>\r\n                                <p>Test, which is a new approach to have all solutions\r\n                                    astrology under one roof.</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div> -->\r\n            <div class=\"mesgs\">\r\n                <div class=\"msg_history\">\r\n                    <div *ngFor=\"let message of messagesHistory\">\r\n                        <div *ngIf=\"message.sender != myId\" class=\"incoming_msg\">\r\n                            <div class=\"incoming_msg_img\"> <img src=\"https://ptetutorials.com/images/user-profile.png\"\r\n                                    alt=\"receiver\"> </div>\r\n                            <div class=\"received_msg\">\r\n                                <div class=\"received_withd_msg\">\r\n                                    <p>{{message.message}}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div *ngIf=\"message.sender == myId\" class=\"outgoing_msg\">\r\n                            <div class=\"sent_msg\">\r\n                                <p>{{message.message}}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"type_msg\">\r\n                    <div class=\"input_msg_write\">\r\n                        <input type=\"text\" [(ngModel)]=\"msg\" class=\"write_msg\" placeholder=\"Type a message\" />\r\n                        <button class=\"msg_send_btn\" (click)=\"sendMessage()\" type=\"button\"><i class=\"fa fa-paper-plane\"\r\n                                aria-hidden=\"true\"></i></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { ChatRoutingModule } from './chat-routing.module';\r\nimport { ChatComponent } from './chat.component';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n\r\n@NgModule({\r\n  declarations: [ChatComponent],\r\n  imports: [\r\n    CommonModule,\r\n    ChatRoutingModule,\r\n    FormsModule\r\n  ]\r\n})\r\nexport class ChatModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { Socket } from 'ngx-socket-io';\r\nimport { Observable } from 'rxjs';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ChatService {\r\n\r\n  messagesHistory: {sender: number; receiver: number,  message: string} [] = [];\r\n\r\n  constructor(private socket: Socket) {\r\n    this.messagesHistory = [\r\n      {sender: 2, receiver: 1, message: 'Hola'},\r\n      {sender: 1, receiver: 2, message: 'Qué tal'},\r\n      {sender: 2, receiver: 1, message: 'Quisiera más informes, por favor'},\r\n      {sender: 1, receiver: 2, message: 'Claro, el precio por hora es de $100'},\r\n      {sender: 2, receiver: 1, message: 'Gracias'},\r\n      {sender: 1, receiver: 2, message: 'Por nada'},\r\n    ];\r\n   }\r\n\r\n   // connecting to the chat\r\n   public startChat(message) {\r\n        this.socket.emit('startChat', message);\r\n  }\r\n\r\n  // confirmation\r\n  public connectedToChat() {\r\n    return Observable.create((observer) => {\r\n      this.socket.on('startChat', (message) => {\r\n        observer.next(message);\r\n      });\r\n    });\r\n  }\r\n\r\n  // senging a message\r\n  public sendMessage(message, sender) {\r\n    this.socket.emit('send', message, sender);\r\n  }\r\n\r\n  // getting a message\r\n  public getMessages() {\r\n    return Observable.create((observer) => {\r\n      this.socket.on('refresh', (message) => {\r\n        observer.next(message);\r\n      });\r\n    });\r\n  }\r\n\r\n  // refreshMessages() {\r\n  //   this.messagesHistory.push\r\n  // }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}